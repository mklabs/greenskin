{{#extend "scripts"}}
<script src="/js/pages/dashboard-admin.js"></script>
{{/extend}}

<div class="page-header clearfix" style="margin-top: 0;">
  <h3>
    Dashboard Admin
  </h3>

  <div class="btn-group right">
    <a href="/dashboard" class="btn btn-default">
      Dashboard
    </a>
  </div>
</div>


<table class="table js-dashboard">
  <thead>
    <tr>
      <th></th>
      <th>Name</th>
      <th>Type</th>
      <th>Last Success</th>
      <th>Last Failure</th>
      <th>Perf avg</th>
      <th>Number of failed builds</th>
      <th>Number of failed asserts</th>
      <th>Availability</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#jobs}}
    <tr class="{{#red}}warning{{/red}}">
      <td>
        <a href="/{{ namespace }}/{{ name }}/{{ lastBuild.number }}">
          <div class="doony-circle doony-circle-{{ color }}{{#animated}} bounceIn animated infinite{{/animated}}" style="display: inline-block; margin-top: 4px; margin-left: 4px; width: 24px; height: 24px;"></div>
        </a>
      </td>
      <td>
        <a href="/{{ namespace }}/{{ name }}/">{{ name }}</a>
        <a href="{{ url }}">(jenkins)</a>
      </td>
      <td>
        <a href="/{{ namespace }}/{{ name }}/edit/" class="label label-default">
        {{ type }}
        </a>
      </td>
      <td>
        <a href="/{{ namespace }}/{{ name }}/{{ lastSuccessfulBuild.number }}">
        {{ lastSuccessfulBuild.moment }}
        </a>
      </td>
      <td>
        <a href="/{{ namespace }}/{{ name }}/{{ lastFailedBuild.number }}">
        {{ lastFailedBuild.moment }}
        </a>
      </td>
      <td>
        <span class="label label-{{ data.loadTimeColor }}">
          {{ data.perfAvg }}ms
        </span>

        <span class="glyphicon glyphicon-arrow-{{ data.loadTimeArrow }}"></span> (Assert: {{data.assertLoadTime}})
      </td>
      <td>
        {{ data.numberOfFailedBuilds }}
      </td>
      <td>
        {{ data.numberOfFailedAsserts }}
      </td>
      <td>
        <span class="label label-{{ data.availabilityColor }}">
          {{ data.availability }}%
        </span>

        <span class="glyphicon glyphicon-arrow-{{ data.availabilityArrow }}"></span> (Avg: {{data.availabilityAvg}})
      </td>
      <td>
        <input class="js-target" type="checkbox" name="{{ name }}" {{#data.selected}}checked="checked"{{/data.selected}}>
      </td>
    </tr>
    {{/jobs}}
  </tbody>
</table>

